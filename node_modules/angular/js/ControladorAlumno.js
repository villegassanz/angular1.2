(function() {
    angular.module("tbcAngular").controller("AlumnoCtrl", AlumnoController);

    function AlumnoController(servicioalumno) {
        var vm = this;
        vm.getAlumnos = getAlumnos;
        vm.getAlumnoById = getAlumnoById;
        vm.updateAlumno = updateAlumno;
        vm.agregarAlumno = agregarAlumno;
        vm.Init = Init;
       
        vm.datos_alumnos = [];
        vm.id = "";
        vm.alumno = {};
        vm.addAlumno = {};
        vm.objAlumno = {};
        vm.login=login;
        vm.valor=false;
        vm.log=[];
        vm.entrar=false;
        
        Init();
        function Init() {
            getAlumnos();
        }

        function login() {
            console.log(vm.user +'--'+vm.password);
            servicioalumno.login(vm.user, vm.password).then(function(data) {
                vm.log = data;
                 vm.entrar=true;
                console.log(vm.log);
            });
        }

        function getAlumnos() {
            console.log("Alumnos");
            servicioalumno.getAlumno().then(function(data) {
                vm.datos_alumnos = data;
                console.log(vm.datos_alumnos);
            }).catch(function(err) {});
        }

        function getAlumnoById(id) {
            servicioalumno.getAlumnoById(id).then(function(data) {
                vm.alumno = data[0];
                vm.valor=true;
                console.log(vm.alumno);
            }).catch(function(err) {});
        }

        function updateAlumno() {
            console.log(vm.alumno);
            servicioalumno.updateAlumno(vm.alumno).then(function(data) {
                vm.alumno = data;
                getAlumnos();
                vm.valor=false;
                console.log("Se actualizo");
               
            })
        }

        function agregarAlumno(obj) {
            console.log(obj);
            obj.password='12345';
            servicioalumno.addAlumno(obj).then(function(data) {
                vm.addAlumno = data;
                console.log(vm.addAlumno);
            })
        }
    }
})();